# ntfy-hub-mcp と ntfy.sh の関係性

`ntfy-hub-mcp` は、`ntfy.sh` サービスとの橋渡しをする MCP (Model Context Protocol) サーバーです。両者は密接に連携し、AI エージェントと人間の間の非同期通信を実現します。

## ntfy.sh とは

`ntfy.sh` は、ウェブフックやシンプルな HTTP リクエストを通じてプッシュ通知を送信できる、オープンソースの通知サービスです。ユーザーはスマートフォンやデスクトップに ntfy クライアントをインストールすることで、特定のトピックを購読し、リアルタイムで通知を受け取ることができます。

`ntfy.sh` には、以下の利用形態があります。
1.  **パブリックなホスティングサービス**: `https://ntfy.sh` (デフォルト)
2.  **自前サーバー (セルフホスト)**: ユーザー自身がサーバーを構築し、独自のドメインで運用 (例: `https://ntfy.your-domain.com`)

## ntfy-hub-mcp の役割

`ntfy-hub-mcp` は、AI エージェントが直接 `ntfy.sh` サービスを利用できるようにするための「アダプター」または「プロキシ」としての役割を果たします。

具体的には：

1.  **MCP インターフェースの提供**:
    *   AI エージェントは MCP プロトコルを通じて `ntfy-hub-mcp` が提供するツール (`ntfy_publish`, `ntfy_wait_for_reply`) を呼び出します。
    *   これにより、エージェントは `ntfy.sh` の低レベルな HTTP API を直接操作することなく、高レベルな抽象化された方法で通知機能を利用できます。

2.  **ntfy.sh との通信**:
    *   `ntfy-hub-mcp` は、エージェントからの MCP ツール呼び出しを受け取ると、内部で `ntfy.sh` の REST API や SSE (Server-Sent Events) を利用して、実際の通知の送信やメッセージの受信を行います。

3.  **セルフホスト対応**:
    *   `ntfy-hub-mcp` は、環境変数 `NTFY_URL` を通じて `ntfy.sh` のベース URL を設定できます。これにより、`https://ntfy.sh` のパブリックサービスだけでなく、ユーザーが自前でホストする `ntfy.sh` サーバーとも柔軟に連携できます。

## 連携の概要

```
+----------------+       MCP      +----------------+       HTTP/SSE       +----------------+
| AI Agent (Gemini) | <-----------> | ntfy-hub-mcp     | <------------------> | ntfy.sh Server |
+----------------+                 +----------------+                      +----------------+
      ^                                      |                                       |
      |                                      | Publish/Subscribe                  | Push Notifications
      |                                      v                                       v
      |                               +---------------+                     +-------------------+
      +------------------------------ | User (Human)  | <-----------------> | ntfy Client (App) |
                                      +---------------+                     +-------------------+
```

この連携により、AI エージェントはユーザーの現在の状況（PC の前か、外出中かなど）に関わらず、重要な情報伝達や指示の送受信を行うことができます。
